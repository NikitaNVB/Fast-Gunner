<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player_idle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>spr_player_mask</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Initialize the player object

//CONSTANT VARIABLES
maxSpd = 3.5; //maximum speed possible
accel = 0.5; //acceleration
hSpd = 0; //intiailize horizontal speed
vSpd = 0; //initialize vertical speed
grav = 0.4; //gravity speed
maxJumpH = -8; //maximum jump height
initialJumpH = -6; // initial jump height
godmode = 0; // blink mode when hit
rollDist = 5; // the distance to roll

// Weapon variables
/*
[0] = bullets for idle shooting
[1] = bullets for walking and shooting
[2] = bullets for ledge shooting
*/
bulletsGun1[0] = 2; // bullets for idle shooting
bulletsGun1[1] = 2; // bulets for walking shooting 
bulletsGun1[2] = 1; // bullets for ledge grab shooting
bulletObject = -1; // bullet object
grenadeObject = -1; // grenade object

// Control variables
rolledOnce = false; // forces to commit to roll
rolledDamage = false; // used to only get once damage when rolling
inLedgeGrab = false; // determines if in ledge grab state

//Scripts
state = move_state;

// Create the audio emitter
audio_em_1 = audio_emitter_create(); // damage
audio_em_2 = audio_emitter_create(); // landing
audio_em_3 = audio_emitter_create(); // shooting

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Make character blink

if (image_alpha == 1.0) 
    image_alpha = 0.3;
else 
    image_alpha = 1.0;


if (godmode == 1) 
    alarm[1] = 4;
else 
    image_alpha = 1.0;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Set godmode back to 0

godmode = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Control the player's state
get_input();

if (obj_PlayerStats.hp &lt;= 0) { // Player dies
    game_restart();
}

//execute state
script_execute(state);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_EnemyParent">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Collide with enemies



//only take damage once if in roll state;
if (state == roll_state){
    if (!rolledDamage){
        repeat (irandom_range(4, 7)) {
        // Create within an area
        var rand_x = irandom_range(-4, 4);
        var rand_y = irandom_range(-4, 4);
        
        instance_create(x+rand_x, y+rand_y, obj_Blood);
        }
        if (!audio_is_playing(snd_ouch)){
            audio_emitter_pitch(audio_em_1, 1.6);
            audio_emitter_gain(audio_em_1, 0.8);
            audio_play_sound_on(audio_em_1, snd_ouch, false, 8);  
        }
        
        if (instance_exists(obj_PlayerStats)) {
                obj_PlayerStats.hp -= obj_PlayerStats.zombieDamage;
                rolledDamage = true;
        }
    }
    
   
} 
else {
    repeat (irandom_range(4, 7)) {
    // Create within an area
    var rand_x = irandom_range(-4, 4);
    var rand_y = irandom_range(-4, 4);
    
    instance_create(x+rand_x, y+rand_y, obj_Blood);
    }
    scr_take_damage();
    
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Change back to move state 

if (state == roll_state) {
    rolledOnce = false; // stops from canceling rolls
    rolledDamage = false; // take damage once from rolls
    state = move_state;
    bulletsGun1[0] = 2; // give back bullets
    bulletsGun1[1] = 2; // give back bullets
}

if (state == move_state){
    bulletsGun1[2] = 1; // give back bullets
}

if (state == ledge_grab_state){
    bulletsGun1[2] = 1; // give back bullets
    sprite_index = spr_player_ledge_grab; // put back into ledge grab sprite
}

if (state == shoot_state) {
    bulletsGun1[0] = 2; // give back bullets
    bulletsGun1[1] = 2; // give back bullets
    state = move_state;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
